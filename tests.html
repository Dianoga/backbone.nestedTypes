<html>
<head>
    <meta charset="utf-8"/>
    <title>Models Tests</title>
    <link rel="stylesheet" href="test/mocha.css"/>
</head>
<body>
<div id="mocha"></div>
<script src="js/lib/requirejs/require.js"></script>
<script type="text/javascript">
    require.config({
        paths: {
            'underscore'    : 'lib/underscore',
            'backbone'      : 'lib/backbone',
            'jquery'        : 'lib/jquery',

            'mocha'         : '../test/mocha',
            'chai'          : '../test/chai',
            'sinon'         : '../test/sinon',
            'sinon-chai'    : '../test/sinon-chai',
            'chai-backbone' : '../test/chai-backbone'
        },

        shim: {
            'sinon': {
                exports: 'sinon'
            },

            'underscore': {
                exports: '_'
            },

            'backbone': {
                deps: ['underscore', 'jquery'],
                exports: 'Backbone'
            }
        }
    });

    require(['require', 'sinon', 'chai', 'sinon-chai', 'chai-backbone', 'mocha' ],
            function(require, sinon, chai, sinonChai, chaiBackbone ){
                // Chai
                chai.should();
                chai.use( sinonChai );
                chai.use( chaiBackbone );

                /*globals mocha */
                mocha.setup( 'bdd' );

                var search = window.location.search;
                require([
                    'tests/' + (search ? search.substring( 1 ) : 'all' )
                ], function( require ) {
                    mocha.run();
                });
            }
    );
</script>
</body>
</html>